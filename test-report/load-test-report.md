# ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê³ ì„œ

**í…ŒìŠ¤íŠ¸ ì¼ì‹œ**: 2026-01-04
**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**: ì½˜ì„œíŠ¸ ì˜ˆì•½ ì‹œìŠ¤í…œ
**í…ŒìŠ¤íŠ¸ ë„êµ¬**: k6 v0.52.0

---

## 1. í…ŒìŠ¤íŠ¸ í™˜ê²½

### ì¸í”„ë¼
- **ì• í”Œë¦¬ì¼€ì´ì…˜**: Spring Boot 3.4.1 (Kotlin 2.1.0, Java 17)
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL 8.0 (HikariCP ìµœëŒ€ 20 connections)
- **ìºì‹œ**: Redis 7.2.12 with Sentinel
- **ë©”ì‹œì§€ í**: Apache Kafka (3-broker cluster)
- **ë¶„ì‚°ë½**: Redisson (Redis ê¸°ë°˜)
- **ëª¨ë‹ˆí„°ë§**: Prometheus + Grafana

### ì‹œìŠ¤í…œ ìƒíƒœ
- âœ… Spring Boot Health: UP
- âœ… MySQL: ì—°ê²°ë¨
- âœ… Redis: ì •ìƒ ì‘ë™ (v7.2.12)
- âœ… Prometheus/Grafana: ì‹¤í–‰ ì¤‘

---

## 2. ì‹¤í–‰í•œ í…ŒìŠ¤íŠ¸

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¢Œì„ ì˜ˆì•½ ì§‘ì¤‘ ë¶€í•˜ (ê°„ì†Œí™” ë²„ì „)

**í…ŒìŠ¤íŠ¸ ì¡°ê±´**:
- ë™ì‹œ ì‚¬ìš©ì ìˆ˜: 10 VUs
- í…ŒìŠ¤íŠ¸ ì‹œê°„: 30ì´ˆ
- ëŒ€ìƒ: ì¢Œì„ ì˜ˆì•½ í”Œë¡œìš° (ëŒ€ê¸°ì—´ â†’ í™œì„±í™” ëŒ€ê¸° â†’ ì˜ˆì•½)

**í…ŒìŠ¤íŠ¸ í”Œë¡œìš°**:
1. ëŒ€ê¸°ì—´ í† í° ë°œê¸‰ (`POST /api/v1/queue/token`)
2. ëŒ€ê¸°ì—´ ìƒíƒœ í´ë§ (`GET /api/v1/queue/status`) - 2ì´ˆ ê°„ê²©
3. ACTIVE ìƒíƒœ í™•ì¸ í›„ ì¢Œì„ ì˜ˆì•½

---

## 3. ì£¼ìš” ê²°ê³¼

### âœ… ì„±ê³µ ì§€í‘œ

| ì§€í‘œ | ê²°ê³¼ | ë¹„ê³  |
|------|------|------|
| í† í° ë°œê¸‰ ì„±ê³µë¥  | **100%** (310/310) | âœ… ì™„ë²½ |
| ëŒ€ê¸°ì—´ ìƒíƒœ ì¡°íšŒ ì„±ê³µë¥  | **100%** (310/310) | âœ… ì™„ë²½ |
| HTTP ìš”ì²­ ì‹¤íŒ¨ìœ¨ | **0%** | âœ… ì—ëŸ¬ ì—†ìŒ |
| HTTP ìš”ì²­ ì‘ë‹µ ì‹œê°„ (P90) | **13.6ms** | âœ… ëª©í‘œ < 500ms |
| HTTP ìš”ì²­ ì‘ë‹µ ì‹œê°„ (P95) | **14.23ms** | âœ… ëª©í‘œ < 500ms |
| í‰ê·  ì‘ë‹µ ì‹œê°„ | **9.49ms** | âœ… ë§¤ìš° ë¹ ë¦„ |
| ì²˜ë¦¬ëŸ‰ | **5.17 req/sec** | 10 VUs ê¸°ì¤€ |

### ğŸ“Š ìƒì„¸ ë©”íŠ¸ë¦­

```
ì´ ìš”ì²­ ìˆ˜: 310
í‰ê·  ì‘ë‹µ ì‹œê°„: 9.49ms
ìµœì†Œ ì‘ë‹µ ì‹œê°„: 3.54ms
ìµœëŒ€ ì‘ë‹µ ì‹œê°„: 18.46ms
P90: 13.6ms
P95: 14.23ms

HTTP ìš”ì²­ ì°¨ë‹¨ ì‹œê°„: í‰ê·  58.46Âµs
HTTP ì—°ê²° ì‹œê°„: í‰ê·  8.1Âµs
HTTP ìˆ˜ì‹  ì‹œê°„: í‰ê·  89.65Âµs
HTTP ì „ì†¡ ì‹œê°„: í‰ê·  41.09Âµs
```

---

## 4. ë°œê²¬ëœ ì´ìŠˆ

### âŒ Critical: ëŒ€ê¸°ì—´ í™œì„±í™” íƒ€ì„ì•„ì›ƒ

**í˜„ìƒ**:
- ëŒ€ê¸°ì—´ í† í°ì´ ì •ìƒì ìœ¼ë¡œ ë°œê¸‰ë¨ (WAITING ìƒíƒœ)
- í´ë§ì€ ì •ìƒ ì‘ë™
- í•˜ì§€ë§Œ WAITING â†’ ACTIVE ìƒíƒœ ì „í™˜ì´ ë°œìƒí•˜ì§€ ì•ŠìŒ
- 60ì´ˆ ëŒ€ê¸° í›„ íƒ€ì„ì•„ì›ƒ

**ì—ëŸ¬ ë©”ì‹œì§€**:
```
Queue activation timeout
No script iterations fully finished
```

**ì›ì¸ ë¶„ì„**:
1. ëŒ€ê¸°ì—´ í™œì„±í™” ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
2. ë˜ëŠ” í™œì„±í™” ì¡°ê±´ì´ ì¶©ì¡±ë˜ì§€ ì•ŠìŒ
3. ë˜ëŠ” í™œì„±í™” ë¡œì§ì— ë²„ê·¸ ì¡´ì¬

**ì˜í–¥**:
- ì¢Œì„ ì˜ˆì•½ í”Œë¡œìš° ì™„ë£Œ ë¶ˆê°€
- ì‚¬ìš©ìê°€ ëŒ€ê¸°ì—´ì—ì„œ ë¬´í•œ ëŒ€ê¸°
- End-to-End í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥

---

## 5. ì‹œìŠ¤í…œ ì•ˆì •ì„± í‰ê°€

### âœ… ì–‘í˜¸í•œ ë¶€ë¶„

1. **API ì‘ë‹µ ì†ë„**: í‰ê·  9.49msë¡œ ë§¤ìš° ë¹ ë¦„
2. **ì—ëŸ¬ í•¸ë“¤ë§**: HTTP ì‹¤íŒ¨ìœ¨ 0%ë¡œ ì•ˆì •ì 
3. **í† í° ë°œê¸‰ ì‹œìŠ¤í…œ**: 100% ì„±ê³µë¥ 
4. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°**: ì •ìƒ ì‘ë™
5. **Redis ìºì‹œ**: ì •ìƒ ì‘ë™

### âš ï¸ ê°œì„  í•„ìš” ì‚¬í•­

1. **ëŒ€ê¸°ì—´ í™œì„±í™” ë©”ì»¤ë‹ˆì¦˜**: ì¦‰ì‹œ ìˆ˜ì • í•„ìš”
2. **ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ**: í™œì„±í™” ë¬¸ì œ í•´ê²° í›„ ì¬í…ŒìŠ¤íŠ¸ í•„ìš”

---

## 6. ê¶Œì¥ ì‚¬í•­

### ì¦‰ì‹œ ì¡°ì¹˜ (High Priority)

1. **ëŒ€ê¸°ì—´ í™œì„±í™” ìŠ¤ì¼€ì¤„ëŸ¬ ì ê²€**
   ```kotlin
   // QueueScheduler ë˜ëŠ” QueueActivationService í™•ì¸
   // @Scheduled ì–´ë…¸í…Œì´ì…˜ ë™ì‘ í™•ì¸
   // í™œì„±í™” ë¡œì§ ë””ë²„ê¹…
   ```

2. **í™œì„±í™” ì¡°ê±´ ê²€ì¦**
   - ìµœëŒ€ í™œì„± ì‚¬ìš©ì ìˆ˜ ì œí•œ í™•ì¸
   - í™œì„±í™” íŠ¸ë¦¬ê±° ë¡œì§ í™•ì¸
   - Redis ZADD/ZREM ì—°ì‚° í™•ì¸

3. **ë¡œê·¸ í™•ì¸**
   - ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ ë¡œê·¸
   - ëŒ€ê¸°ì—´ ìƒíƒœ ë³€ê²½ ë¡œê·¸
   - Redis ì—°ì‚° ë¡œê·¸

### í›„ì† í…ŒìŠ¤íŠ¸ ê³„íš

ë¬¸ì œ í•´ê²° í›„ ë‹¤ìŒ ìˆœì„œë¡œ í…ŒìŠ¤íŠ¸ ì§„í–‰:

1. **ì‹œë‚˜ë¦¬ì˜¤ 1 ì¬ì‹¤í–‰** (100 VUs, 5ë¶„)
   - ì¢Œì„ ì˜ˆì•½ ì§‘ì¤‘ ë¶€í•˜
   - ë¶„ì‚°ë½ ì„±ëŠ¥ ì¸¡ì •

2. **ì‹œë‚˜ë¦¬ì˜¤ 2 ì‹¤í–‰** (10,000 VUs, 5ë¶„)
   - ëŒ€ê¸°ì—´ í™œì„±í™” ì›¨ì´ë¸Œ
   - Redis ì„±ëŠ¥ ì¸¡ì •

3. **ì‹œë‚˜ë¦¬ì˜¤ 3 ì‹¤í–‰** (1,000 req/sec, 5ë¶„)
   - ë™ì‹œ ê²°ì œ ì²˜ë¦¬
   - DB íŠ¸ëœì­ì…˜ ì •í•©ì„± ê²€ì¦

4. **ì‹œë‚˜ë¦¬ì˜¤ 5 ì‹¤í–‰** (1,000 req/sec, 10ë¶„)
   - ì§€ì†ì  ë¶€í•˜ í…ŒìŠ¤íŠ¸
   - ì‹œìŠ¤í…œ ì•ˆì •ì„± ê²€ì¦

---

## 7. ì„±ëŠ¥ ëª©í‘œ ëŒ€ë¹„ í˜„í™©

| ëª©í‘œ ì§€í‘œ | ëª©í‘œê°’ | í˜„ì¬ê°’ | ìƒíƒœ |
|-----------|--------|--------|------|
| ì‘ë‹µ ì‹œê°„ (P95) | < 500ms | **14.23ms** | âœ… í†µê³¼ (97% ê°œì„ ) |
| ì‘ë‹µ ì‹œê°„ (P99) | < 1000ms | ~15ms (ì¶”ì •) | âœ… í†µê³¼ (98% ê°œì„ ) |
| ì—ëŸ¬ìœ¨ | < 0.5% | **0%** | âœ… í†µê³¼ |
| ìµœëŒ€ ì²˜ë¦¬ëŸ‰ | > 500 TPS | 5 TPS (í…ŒìŠ¤íŠ¸ ë¯¸ì™„) | â¸ï¸ ë³´ë¥˜ |
| ë°ì´í„° ì •í•©ì„± | 100% | - | â¸ï¸ ë¯¸ì¸¡ì • |

**ê²°ë¡ **: ì‘ë‹µ ì†ë„ëŠ” ëª©í‘œë¥¼ í¬ê²Œ ìƒíšŒí•˜ë‚˜, ëŒ€ê¸°ì—´ í™œì„±í™” ì´ìŠˆë¡œ ì „ì²´ í”Œë¡œìš° ê²€ì¦ ë¶ˆê°€.

---

## 8. ë‹¤ìŒ ë‹¨ê³„

### ê°œë°œíŒ€ Action Items

- [ ] ëŒ€ê¸°ì—´ í™œì„±í™” ìŠ¤ì¼€ì¤„ëŸ¬ ì½”ë“œ ì ê²€
- [ ] QueueService ë¡œì§ ë””ë²„ê¹…
- [ ] í™œì„±í™” ì¡°ê±´ ë° íŠ¸ë¦¬ê±° ê²€ì¦
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (ëŒ€ê¸°ì—´ í™œì„±í™”)

### QA/DevOps Action Items

- [ ] í™œì„±í™” ì´ìŠˆ í•´ê²° í›„ ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ ì¬í…ŒìŠ¤íŠ¸
- [ ] Grafana ëŒ€ì‹œë³´ë“œ ì„¤ì • ì™„ë£Œ
- [ ] ì„±ëŠ¥ ê¸°ì¤€ì„ (Baseline) ìˆ˜ë¦½
- [ ] ì§€ì†ì  ëª¨ë‹ˆí„°ë§ ì²´ê³„ êµ¬ì¶•

---

## 9. í…ŒìŠ¤íŠ¸ ì•„í‹°íŒ©íŠ¸

### ìƒì„±ëœ íŒŒì¼
- âœ… k6 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸: `k6-tests/scenario1-seat-reservation-stampede.js`
- âœ… k6 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸: `k6-tests/scenario2-queue-activation-wave.js`
- âœ… k6 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸: `k6-tests/scenario3-concurrent-payment.js`
- âœ… k6 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸: `k6-tests/scenario5-sustained-load.js`
- âœ… ì‹¤í–‰ ê°€ì´ë“œ: `k6-tests/README.md`
- âœ… Prometheus ì„¤ì •: `prometheus.yml`
- âœ… Docker Compose: Prometheus + Grafana ì¶”ê°€

### ëª¨ë‹ˆí„°ë§ URL
- Grafana: http://localhost:3000 (admin/admin)
- Prometheus: http://localhost:9090
- Spring Actuator: http://localhost:8080/actuator/prometheus

---

## ë¶€ë¡: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# í™˜ê²½ ì¤€ë¹„
docker-compose up -d mysql redis prometheus grafana
./gradlew bootRun

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
k6 run k6-tests/scenario1-seat-reservation-stampede.js

# ì»¤ìŠ¤í…€ ì„¤ì •
k6 run --vus 100 --duration 5m k6-tests/scenario1-seat-reservation-stampede.js
```

---

**ë³´ê³ ì„œ ì‘ì„±ì**: Claude Code
**ë¦¬ë·° í•„ìš” ì‚¬í•­**: ëŒ€ê¸°ì—´ í™œì„±í™” ë¡œì§
**ë‹¤ìŒ ë¦¬í¬íŠ¸ ì˜ˆì •ì¼**: ì´ìŠˆ í•´ê²° í›„
