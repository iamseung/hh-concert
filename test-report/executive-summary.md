# 부하 테스트 결과 요약

**테스트 기간**: 2026-01-04 ~ 2026-01-06
**테스트 도구**: k6
**완료된 테스트**: 시나리오 1, 2, 3(부분), 5

---

## 🎯 핵심 결과

### ✅ 우수한 성능

| 시나리오 | 주요 지표 | 결과 |
|---------|---------|------|
| **전체** | API 응답 속도 (P95) | **6.82 ~ 32ms** (목표 500ms 대비 94~98% 개선) |
| **전체** | HTTP 성공률 | **100%** |
| **시나리오 2** | 처리량 | **2,081 req/sec** |
| **시나리오 2** | 토큰 발급 | 99.99% 성공 (189,404건) |
| **시나리오 3** | DB 데드락 | **0건** |
| **시나리오 3** | 포인트 충전 | 100% 성공 |

### ❌ 차단 이슈 (CRITICAL)

**대기열 활성화 타임아웃** - 모든 시나리오 영향
- WAITING → ACTIVE 상태 전환 미작동
- E2E 사용자 여정 테스트 불가
- **즉시 수정 필요**

**k6 스크립트 데이터 공유 문제** - 시나리오 2, 3
- 시나리오 간 변수 공유 불가
- 결제 단계 테스트 미측정

---

## 🔴 즉시 조치 사항

1. **대기열 스케줄러 점검**
   - `@Scheduled` 동작 확인
   - Redis 상태 전환 로직 디버깅
   - 로그 분석 (스케줄러 실행, 상태 변경 이벤트)

2. **k6 스크립트 리팩토링**
   - 시나리오 통합 또는 SharedArray 사용
   - E2E 테스트 재설계

---

## 📊 시나리오별 상세 결과

| 시나리오 | 부하 | 성공 | 실패/제한사항 | 상세 |
|---------|------|------|-------------|------|
| **1** | 10 VUs, 30초 | P95 14.23ms, 0% 실패 | 대기열 활성화 타임아웃 | [링크](./scenario1-results.md) |
| **2** | 100 VUs, 1분 30초 | 2,081 req/sec, 99.99% 성공 | 대기열 활성화 타임아웃 | [링크](./scenario2-results.md) |
| **3** | 10+50 VUs, 1분 30초 | 100% 포인트 충전, 0건 데드락 | 결제 단계 미측정 (스크립트 이슈) | [링크](./scenario3-results.md) |
| **5** | 50 req/sec, 2분 | P95 6.82ms, 100% HTTP 성공 | E2E 0% 성공 (대기열 타임아웃) | [링크](./scenario5-results.md) |

---

## 📈 성능 평가

| 지표 | 목표 | 실제 | 평가 |
|------|------|------|------|
| P95 응답시간 | < 500ms | 6.82 ~ 32ms | ✅ **목표 대비 94~98% 개선** |
| HTTP 실패율 | < 0.5% | 0% | ✅ **완벽** |
| DB 데드락 | < 10건 | 0건 | ✅ **안정적** |
| E2E 성공률 | > 99.9% | 0% | ❌ **차단 이슈** |

**결론**: API 성능은 우수하나 대기열 활성화 이슈로 E2E 플로우 검증 불가

---

## 🔄 다음 단계

**이슈 해결 후**:
1. 시나리오 1, 2, 3, 5 재테스트
2. 10,000 VUs 규모 부하 테스트
3. 최종 성능 보고서 작성

---

**최종 업데이트**: 2026-01-06
