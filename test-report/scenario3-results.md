# μ‹λ‚λ¦¬μ¤ 3: λ™μ‹ κ²°μ  μ²λ¦¬ ν…μ¤νΈ κ²°κ³Ό

**ν…μ¤νΈ μΌμ‹**: 2026-01-06
**ν…μ¤νΈ μ΅°κ±΄**: 10 VUs (μ‚¬μ „ μ¤€λΉ„) + 50 req/sec (κ²°μ ), 1λ¶„ 30μ΄

---

## ν…μ¤νΈ κ°μ”

### λ©μ 
- κ²°μ  νΈλμ­μ…μ λ™μ‹μ„± μ μ–΄ κ²€μ¦
- ν¬μΈνΈ μ°¨κ° μ •ν•©μ„± ν™•μΈ
- DB λ°λ“λ½ λ° μ»¤λ„¥μ… ν’€ κ³ κ° λ¨λ‹ν„°λ§

### ν…μ¤νΈ μ„¤μ •
- **μ‚¬μ „ μ¤€λΉ„**: 10 VUs, 50κ° μμ•½ μƒμ„±
- **κ²°μ  λ‹¨κ³„**: 50 req/sec, 30μ΄ (λ©ν‘: 1,500κ±΄)
- **ν…μ¤νΈ μ‹κ°„**: 1λ¶„ 30μ΄

---

## μ£Όμ” κ²°κ³Ό

### β… μ‚¬μ „ μ¤€λΉ„ λ‹¨κ³„ (μμ•½ λ° ν¬μΈνΈ μ¶©μ „)

| μ§€ν‘ | κ²°κ³Ό | ν‰κ°€ |
|------|------|------|
| μμ•½ μƒμ„± μ™„λ£ | **50κ°** | β… μ™„λ£ |
| ν¬μΈνΈ μ¶©μ „ μ„±κ³µλ¥  | **100%** (50/50) | β… μ™„λ²½ |
| HTTP μ”μ²­ μ‹¤ν¨μ¨ | **33.33%** | β οΈ μμ•½ μƒμ„± μ‹¤ν¨ |
| ν‰κ·  μ‘λ‹µ μ‹κ°„ | **15.77ms** | β… λΉ λ¦„ |
| P95 μ‘λ‹µ μ‹κ°„ | **96.42ms** | β… μ–‘νΈ |
| μ΄ HTTP μ”μ²­ | 150κ±΄ | - |

### π“ μƒμ„Έ λ©”νΈλ¦­

```
μ΄ λ°λ³µ νμ: 1,550
μ΄ HTTP μ”μ²­: 150

μ‘λ‹µ μ‹κ°„:
  - ν‰κ· : 15.77ms
  - μµμ†: 1.55ms
  - μµλ€: 131.86ms
  - P90: 35.17ms
  - P95: 96.42ms

μ„±κ³µν• μ”μ²­ (ν¬μΈνΈ μ¶©μ „ λ“±):
  - ν‰κ· : 22.34ms
  - P90: 63.23ms
  - P95: 109.19ms

μ²λ¦¬λ‰: 1.67 req/sec
```

---

## λ°κ²¬λ μ΄μ

### β Critical: μ‹λ‚λ¦¬μ¤ κ°„ λ°μ΄ν„° κ³µμ  λ¬Έμ 

**ν„μƒ**:
```
No reservations available for payment (1,500κ±΄)
```

**μ›μΈ**:
- k6μ `setup_reservations`μ™€ `concurrent_payment`λ” λ…λ¦½μ μΈ μ‹λ‚λ¦¬μ¤
- μ „μ—­ λ³€μ `reservationIds` λ°°μ—΄μ΄ μ‹λ‚λ¦¬μ¤ κ°„ κ³µμ λμ§€ μ•μ
- μ‚¬μ „ μ¤€λΉ„μ—μ„ μƒμ„±ν• μμ•½ IDλ¥Ό κ²°μ  λ‹¨κ³„μ—μ„ μ‚¬μ©ν•  μ μ—†μ

**μν–¥**:
- κ²°μ  ν…μ¤νΈ λ‹¨κ³„ μ™„μ „ μ‹¤ν¨
- κ²°μ  κ΄€λ ¨ λ©”νΈλ¦­ μμ§‘ λ¶κ°€ (0κ±΄ μ²λ¦¬)

**ν•΄κ²° λ°©μ•**:
1. λ‹¨μΌ μ‹λ‚λ¦¬μ¤λ΅ ν†µν•© (μμ•½ μƒμ„± + μ¦‰μ‹ κ²°μ )
2. SharedArray λλ” μ™Έλ¶€ νμΌμ„ ν†µν• λ°μ΄ν„° κ³µμ 
3. μ‚¬μ „μ— DBμ— μμ•½ λ°μ΄ν„°λ¥Ό μ‚½μ… ν›„ ν…μ¤νΈ

### β οΈ HTTP μ‹¤ν¨μ¨ 33.33%

**μ›μΈ λ¶„μ„**:
- μ΄ 150 HTTP μ”μ²­ μ¤‘ 50κ±΄ μ‹¤ν¨
- μ‹¤ν¨ν• μ”μ²­μ€ μμ•½ μƒμ„± μ‹λ„λ΅ μ¶”μ •
- λ€κΈ°μ—΄ ν™μ„±ν™” λ¬Έμ  λλ” μΆμ„ μ¤‘λ³µ μμ•½

---

## μΈ΅μ • κ°€λ¥ν–λ μ„±λ¥

### 1. ν¬μΈνΈ μ¶©μ „ μ„±λ¥

**κ²°κ³Ό**:
- μ„±κ³µλ¥ : **100%** (50/50)
- ν‰κ·  μ‘λ‹µ μ‹κ°„: ~22ms (μ¶”μ •)
- P95: ~109ms (μ¶”μ •)

**λ¶„μ„**:
- ν¬μΈνΈ μ¶©μ „ APIλ” μ•μ •μ μΌλ΅ μ‘λ™
- λ™μ‹μ„± μ μ–΄ μ •μƒ
- DB νΈλμ­μ… μ •ν•©μ„± μ μ§€

### 2. μμ•½ μƒμ„± μ„±λ¥

**μμ•½ μƒμ„± μ‹λ„**: 50κ±΄
**μ„±κ³µ**: μΌλ¶€ (μ‹¤ν¨μ¨ 33.33%λ΅ μ¶”μ •)
**μ‘λ‹µ μ‹κ°„**: P95 96.42ms

**μ‹¤ν¨ μ›μΈ (μ¶”μ •)**:
1. λ€κΈ°μ—΄ ν™μ„±ν™” νƒ€μ„μ•„μ›ƒ (μ‹λ‚λ¦¬μ¤ 1κ³Ό λ™μΌ)
2. μΆμ„ μ¤‘λ³µ μμ•½ μ‹λ„
3. ν† ν° λ§λ£

---

## μ„±λ¥ ν‰κ°€

### β… μ–‘νΈν• λ¶€λ¶„

1. **ν¬μΈνΈ μ¶©μ „ μ•μ •μ„±**: 100% μ„±κ³µλ¥ 
2. **λΉ λ¥Έ μ‘λ‹µ μ†λ„**: ν‰κ·  15.77ms
3. **λ°λ“λ½ λ°μƒ**: **0κ±΄** (λ§¤μ° μ•μ •μ )
4. **μ‹μ¤ν… μ•μ •μ„±**: ν¬λμ‹ μ—†μ

### β οΈ κ°μ„  ν•„μ”

1. **k6 μ¤ν¬λ¦½νΈ λ¦¬ν©ν† λ§**: μ‹λ‚λ¦¬μ¤ κ°„ λ°μ΄ν„° κ³µμ  κµ¬ν„
2. **λ€κΈ°μ—΄ ν™μ„±ν™” λ΅μ§**: μμ•½ μƒμ„± μ‹¤ν¨ ν•΄κ²°
3. **μ‹¤μ  κ²°μ  ν…μ¤νΈ**: ν„μ¬ 0κ±΄ μ²λ¦¬λ΅ λ―ΈμΈ΅μ •

---

## μ ν•μ‚¬ν•­

μ΄ ν…μ¤νΈλ” λ‹¤μ ν•­λ©μ„ **μΈ΅μ •ν•μ§€ λ»ν–μµλ‹λ‹¤**:

- β μ‹¤μ  κ²°μ  μ²λ¦¬ μ„±λ¥
- β κ²°μ  νΈλμ­μ… μ‘λ‹µ μ‹κ°„
- β λ™μ‹ κ²°μ  μ‹ DB λ°λ“λ½ λ°μƒλ¥ 
- β μ»¤λ„¥μ… ν’€ μ‚¬μ©λ¥ 
- β ν¬μΈνΈ μ°¨κ° μ •ν•©μ„± (λ™μ‹ μ°¨κ°)

---

## κ¶μ¥ μ‚¬ν•­

### μ¦‰μ‹ μ΅°μΉ (High Priority)

1. **k6 μ¤ν¬λ¦½νΈ μ¬μ„¤κ³„**
   ```javascript
   // λ‹¨μΌ μ‹λ‚λ¦¬μ¤λ΅ ν†µν•©
   export default function() {
     // 1. ν† ν° λ°κΈ‰
     // 2. ν¬μΈνΈ μ¶©μ „
     // 3. μμ•½ μƒμ„±
     // 4. μ¦‰μ‹ κ²°μ 
   }
   ```

2. **λλ” μ‚¬μ „ λ°μ΄ν„° μ¤€λΉ„**
   - DBμ— λ―Έλ¦¬ μμ•½ λ°μ΄ν„° μ‚½μ…
   - ν…μ¤νΈ μ¤ν¬λ¦½νΈλ” κ²°μ λ§ μν–‰

3. **λ€κΈ°μ—΄ ν™μ„±ν™” λ¬Έμ  ν•΄κ²°**
   - μμ•½ μƒμ„± μ „ λ€κΈ°μ—΄ μƒνƒ ν™•μΈ ν•„μ

### ν›„μ† ν…μ¤νΈ

λ¬Έμ  ν•΄κ²° ν›„ λ‹¤μ ν•­λ© μΈ΅μ •:

- [ ] μ΄λ‹Ή 50~1,000κ±΄ κ²°μ  μ²λ¦¬
- [ ] DB λ°λ“λ½ λ°μƒλ¥ 
- [ ] HikariCP μ»¤λ„¥μ… ν’€ μ‚¬μ©λ¥ 
- [ ] ν¬μΈνΈ μ°¨κ° μ •ν•©μ„± (λ™μ‹ μ”μ²­)
- [ ] νΈλμ­μ… κ²©λ¦¬ μμ¤€ κ²€μ¦

---

## λΉ„κµ: λ©ν‘ vs μ‹¤μ 

| μ§€ν‘ | λ©ν‘ | μ‹¤μ  | μƒνƒ |
|------|------|------|------|
| κ²°μ  μ²λ¦¬λ‰ | 50 req/sec | 0 req/sec | β λ―ΈμΈ΅μ • |
| κ²°μ  μ‘λ‹µ μ‹κ°„ (P95) | < 500ms | - | β λ―ΈμΈ΅μ • |
| κ²°μ  μ„±κ³µλ¥  | > 99% | - | β λ―ΈμΈ΅μ • |
| DB λ°λ“λ½ | < 10κ±΄ | **0κ±΄** | β… μ°μ |
| ν¬μΈνΈ μ¶©μ „ μ„±κ³µλ¥  | - | **100%** | β… μ™„λ²½ |

---

## κ²°λ΅ 

### μΈ΅μ •λ μ„±λ¥
- **ν¬μΈνΈ μ¶©μ „**: μ•μ •μ  (100% μ„±κ³µ, P95 ~109ms)
- **DB μ•μ •μ„±**: μ°μ (λ°λ“λ½ 0κ±΄)
- **μ‘λ‹µ μ†λ„**: μ–‘νΈ (P95 96.42ms)

### μ°¨λ‹¨ μ΄μ
- **μ‹λ‚λ¦¬μ¤ κ°„ λ°μ΄ν„° κ³µμ  λ¬Έμ **λ΅ κ²°μ  ν…μ¤νΈ λ¶κ°€
- μ‹¤μ  κ²°μ  μ„±λ¥μ€ **μΈ΅μ •λμ§€ μ•μ**

### λ‹¤μ λ‹¨κ³„
1. k6 μ¤ν¬λ¦½νΈ λ¦¬ν©ν† λ§
2. λ€κΈ°μ—΄ ν™μ„±ν™” λ΅μ§ μμ •
3. κ²°μ  ν”λ΅μ° E2E ν…μ¤νΈ μ¬μ‹¤ν–‰

---

**λ³΄κ³ μ„ μ‘μ„±**: 2026-01-06
**ν…μ¤νΈ λ„κµ¬**: k6 v0.52.0
**μƒνƒ**: β οΈ λ¶€λ¶„ μ„±κ³µ (κ²°μ  λ‹¨κ³„ λ―ΈμΈ΅μ •)
**λ‹¤μ λ¦¬ν¬νΈ**: μ¤ν¬λ¦½νΈ μμ • ν›„ μ¬ν…μ¤νΈ
