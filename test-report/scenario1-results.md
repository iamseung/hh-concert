# 시나리오 1: 좌석 예약 경쟁 테스트

**테스트 일시**: 2026-01-04
**테스트 조건**: 10 VUs, 30초 (원래 목표: 10,000 VUs)

---

## 테스트 목적

10,000명이 동시에 50개 좌석 예약 시도 (테스트용 10 VUs로 축소)
- Redis 분산락 성능 검증
- 좌석 중복 예약 방지 확인

---

## 핵심 결과

### ✅ 우수한 성능

| 지표 | 결과 | 평가 |
|------|------|------|
| **P95 응답시간** | **14.23ms** | ✅ 목표(500ms) 대비 97% 개선 |
| **P99 응답시간** | ~15ms | ✅ 목표(1000ms) 대비 98% 개선 |
| **HTTP 실패율** | **0%** | ✅ 완벽 |
| **토큰 발급 성공률** | **100%** (310건) | ✅ 완벽 |
| **대기열 조회 성공률** | **100%** (310건) | ✅ 완벽 |

### ❌ 차단 이슈

**대기열 활성화 타임아웃**
- WAITING → ACTIVE 상태 전환 미작동
- 예약 단계 진행 불가
- **원인**: 스케줄러 미실행 또는 Redis 상태 변경 로직 문제

---

## 상세 메트릭

```
총 HTTP 요청: 310건
평균 응답시간: 9.49ms
P50: ~4ms (추정)
P95: 14.23ms
Max: 18.46ms
처리량: 5.17 req/sec

토큰 발급: 100% 성공 (310건)
대기열 조회: 100% 성공 (310건)
```

---

## 측정 불가 항목

대기열 활성화 차단으로 다음 항목 미측정:
- ❌ 좌석 조회 성능
- ❌ 좌석 예약 성능
- ❌ 분산락 동시성 제어
- ❌ 중복 예약 방지 검증

---

## 즉시 조치 사항

1. **대기열 스케줄러 점검**
   - `@Scheduled` 동작 확인
   - QueueScheduler 로직 디버깅
   - Redis ZADD/ZREM 연산 검증

2. **로그 분석**
   - 스케줄러 실행 로그
   - 대기열 상태 변경 로그

---

## 다음 단계

**이슈 해결 후**:
1. 시나리오 1 재실행 (10,000 VUs)
2. 분산락 성능 및 중복 예약 방지 검증

---

**보고서 작성**: 2026-01-04
**상태**: ❌ 차단 이슈 (대기열 활성화)
